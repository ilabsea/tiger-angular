<h1 mat-dialog-title>{{data.header}}</h1>

<form [formGroup]="myForm" (ngSubmit)="handleSubmit()">
  <div mat-dialog-content>
    <mat-form-field class="full-width">
      <input matInput placeholder="Question" formControlName="label" required />
      <mat-error *ngIf="myForm.controls.label.hasError('required')">Can't be blank</mat-error>
    </mat-form-field>

    <mat-form-field class="full-width">
      <textarea
        matInput
        matTextareaAutosize
        matAutosizeMaxRows="5"
        placeholder="Educational Message"
        formControlName="message"
      ></textarea>
    </mat-form-field>

    <h2 class='mat-typography answer-title'>
      <span class='mat-body-2'>Answer choices</span>
      <span class='error mat-body-1' *ngIf="submmited && noAnswerSelected()">(Please select at least one choice)</span>
    </h2>

    <div class="example-radio-group" formArrayName="choices">
      <div *ngFor="let choice of myForm['controls'].choices['controls']; let i=index">
        <div [formGroupName]="i">
          <mat-checkbox formControlName='answered'></mat-checkbox>

          <mat-form-field class="choice-field">
            <input matInput placeholder="Choice {{i + 1}}" formControlName="label" required />
            <mat-icon matSuffix (click)="removeChoice(i)" [hidden]="myForm.controls.choices.controls.length < 2">delete</mat-icon>
            <mat-error *ngIf="myForm.controls.choices.controls[i].controls.label.hasError('required')">Can't be blank</mat-error>
          </mat-form-field>

        </div>
      </div>
    </div>

    <button mat-button color="primary" type='button' (click)='addChoice()'>
      Add another choice +
    </button>
  </div>

  <div mat-dialog-actions>
    <button mat-raised-button color='primary' type='submit'>Save</button>
    <button mat-button type="button" [mat-dialog-close]=''>Cancel</button>
  </div>
</form>
