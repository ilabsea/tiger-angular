<mat-toolbar color="primary">
  <app-menu-button></app-menu-button>
  <span>Dashboard</span>
</mat-toolbar>

<section class="mat-typography flex-center" *ngIf='!dataSource.length || loading'>
  <div *ngIf="!dataSource.length && !loading" class='no-item-available'>
    <h3 class='mat-title'>No Data Available.</h3>
  </div>

  <mat-spinner diameter='40' *ngIf='loading' color='accent'></mat-spinner>
</section>

<div class="content-wrapper" [hidden]="!dataSource.length || loading">
  <div class='flex-layout'>
    <span class="spacer"></span>
    <mat-form-field style='margin-right: 10px;'>
      <mat-select placeholder="" [(ngModel)]="selectedStory" name='story_id' (selectionChange)="filterData()">
        <mat-option *ngFor="let story of stories" [value]="story.id">
          <span>{{ story.title }}</span>
          <span *ngIf="!!story.status">({{story.status}})</span>
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select placeholder="" [(ngModel)]="selectedTime" name='my_time' (selectionChange)="filterData()">
        <mat-option *ngFor="let time of times" [value]="time">
          {{ time.label }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="mat-typography flex-layout label-wrapper">
    <div class='download-wrapper'>
      <div class='mat-body-1 download-title'>Downloads by user</div>
      <div class='mat-body-1 download-count'>{{totalDownload}}</div>
      <div class='mat-body-2'>Last {{selectedTime.label}}</div>
    </div>

    <div>
      <div class='mat-body-1 read-title'>Reads by user</div>
      <div class='mat-body-1 read-count'>{{totalRead}}</div>
      <div class='mat-body-2'>Last {{selectedTime.label}}</div>
    </div>
  </div>

  <div class="row">
    <div>
      <canvas baseChart width="700" height="400"
        [datasets]="lineChartData"
        [labels]="lineChartLabels"
        [options]="lineChartOptions"
        [chartType]="'line'">
      </canvas>
    </div>
  </div>
</div>
